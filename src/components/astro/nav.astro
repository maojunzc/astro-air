---
import { en, zh } from "~/config"
import { getLangFromUrl, useTranslations } from "~/i18n/utils"

const lang = getLangFromUrl(Astro.url)
const t = useTranslations(lang)

const { home, archive, custom, links, reading, plugins, tools, about } =
  lang === "zh" ? zh.navigation : en.navigation
---

<div class="mt-4 mb-10">
  <nav
    class="flex gap-2 overflow-x-auto text-lg whitespace-nowrap [-ms-overflow-style:none] [scrollbar-width:none] md:gap-6 [&::-webkit-scrollbar]:hidden"
  >
    {
      home && (
        <a
          href={`/${lang}`}
          class="group relative rounded-md px-4 py-2 transition-colors hover:bg-gray-100 dark:hover:bg-gray-800"
          aria-label={t("nav.home")}
          title={t("nav.home")}
          data-astro-prefetch="viewport"
        >
          <p>{t("nav.home")}</p>
          <span class="absolute right-0 bottom-0 left-0 h-0.5 origin-left scale-x-0 bg-blue-500 transition-transform group-hover:scale-x-100" />
        </a>
      )
    }
    {
      archive && (
        <a
          href={`/${lang}/archive`}
          class="group relative rounded-md px-4 py-2 transition-colors hover:bg-gray-100 dark:hover:bg-gray-800"
          aria-label={t("nav.archive")}
          title={t("nav.archive")}
          data-astro-prefetch="viewport"
        >
          <p>{t("nav.archive")}</p>
          <span class="absolute right-0 bottom-0 left-0 h-0.5 origin-left scale-x-0 bg-blue-500 transition-transform group-hover:scale-x-100" />
        </a>
      )
    }
    {
      custom?.map((tab) => (
        <a
          href={tab.link}
          class="group relative rounded-md px-4 py-2 transition-colors hover:bg-gray-100 dark:hover:bg-gray-800"
          target="_blank"
          aria-label={tab.label}
          title={tab.label}
          data-astro-prefetch="viewport"
        >
          <p>{tab.label}</p>
          <span class="absolute right-0 bottom-0 left-0 h-0.5 origin-left scale-x-0 bg-blue-500 transition-transform group-hover:scale-x-100" />
        </a>
      ))
    }
    {
      links && (
        <a
          href={`/${lang}/links`}
          class="group relative rounded-md px-4 py-2 transition-colors hover:bg-gray-100 dark:hover:bg-gray-800"
          aria-label={t("nav.links")}
          title={t("nav.links")}
          data-astro-prefetch="viewport"
        >
          <p>{t("nav.links")}</p>
          <span class="absolute right-0 bottom-0 left-0 h-0.5 origin-left scale-x-0 bg-blue-500 transition-transform group-hover:scale-x-100" />
        </a>
      )
    }
    {
      reading && (
        <a
          href={`/${lang}/reading`}
          class="group relative rounded-md px-4 py-2 transition-colors hover:bg-gray-100 dark:hover:bg-gray-800"
          aria-label={t("nav.reading")}
          title={t("nav.reading")}
          data-astro-prefetch="viewport"
        >
          <p>{t("nav.reading")}</p>
          <span class="absolute right-0 bottom-0 left-0 h-0.5 origin-left scale-x-0 bg-blue-500 transition-transform group-hover:scale-x-100" />
        </a>
      )
    }
    {
      plugins && (
        <a
          href={`/${lang}/plugins`}
          class="group relative rounded-md px-4 py-2 transition-colors hover:bg-gray-100 dark:hover:bg-gray-800"
          aria-label={t("nav.plugins")}
          title={t("nav.plugins")}
          data-astro-prefetch="viewport"
        >
          <p>{t("nav.plugins")}</p>
          <span class="absolute right-0 bottom-0 left-0 h-0.5 origin-left scale-x-0 bg-blue-500 transition-transform group-hover:scale-x-100" />
        </a>
      )
    }
    {
      tools && (
        <a
          href={`/${lang}/tools`}
          class="group relative rounded-md px-4 py-2 transition-colors hover:bg-gray-100 dark:hover:bg-gray-800"
          aria-label={t("nav.tools")}
          title={t("nav.tools")}
          data-astro-prefetch="viewport"
        >
          <p>{t("nav.tools")}</p>
          <span class="absolute right-0 bottom-0 left-0 h-0.5 origin-left scale-x-0 bg-blue-500 transition-transform group-hover:scale-x-100" />
        </a>
      )
    }
    {
      about && (
        <a
          href={`/${lang}/about`}
          class="group relative rounded-md px-4 py-2 transition-colors hover:bg-gray-100 dark:hover:bg-gray-800"
          aria-label={t("nav.about")}
          title={t("nav.about")}
          data-astro-prefetch="viewport"
        >
          <p>{t("nav.about")}</p>
          <span class="absolute right-0 bottom-0 left-0 h-0.5 origin-left scale-x-0 bg-blue-500 transition-transform group-hover:scale-x-100" />
        </a>
      )
    }
  </nav>
</div>
