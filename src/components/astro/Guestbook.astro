---
const { lang = "zh" } = Astro.props
const isChinese = lang === "zh"
---

<div class="my-10">
  <h3 class="mb-6 text-center text-xl font-bold">
    {isChinese ? "留言板" : "Guestbook"}
  </h3>

  <!-- Twikoo 评论系统 -->
  <div class="rounded-lg bg-white p-6 shadow-md dark:bg-gray-800">
    <div id="guestbook-tcomment"></div>
  </div>
</div>

<script>
  import twikoo from "twikoo"
  import { common } from "~/config"
  import "~/styles/twikoo.css"

  function initTwikoo() {
    twikoo({
      envId: common.comments.twikoo.envId,
      el: "#guestbook-tcomment",
      lang: lang === "zh" ? "zh-CN" : "en-GB",
      path: "/links",
    }).then(() => {
      console.log("Guestbook Twikoo loading success")
    })
  }

  initTwikoo()

  document.addEventListener("astro:page-load", () => {
    initTwikoo()
  })
</script>
