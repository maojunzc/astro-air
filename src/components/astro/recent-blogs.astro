---
import { common } from "~/config"
import { getLangFromUrl, useTranslations } from "~/i18n/utils"
import { getPostsByLocale } from "~/utils"
import PostList from "./post-list.astro"

const lang = getLangFromUrl(Astro.url)
const t = useTranslations(lang)

const allPosts = await getPostsByLocale(lang)
const posts = allPosts.slice(0, common.latestPosts)
---

<div class="my-8 text-xl font-medium md:my-8">{t("blog.latest")}</div>
{
  posts.length > 0 ? (
    posts.map((post: any) => (
      <PostList
        post={post}
        lang={lang}
        dateFormat="YYYY-MM-DD"
        dateWidth="w-32"
      />
    ))
  ) : (
    <div class="flex flex-col items-center justify-center py-20 text-center">
      <div class="mb-6 animate-bounce text-6xl">ğŸ“</div>
      <div class="max-w-md rounded-lg bg-white p-8 shadow-md dark:bg-gray-800">
        <h3 class="mb-3 text-2xl font-bold text-gray-800 dark:text-gray-200">
          æš‚æ— æ–‡ç« 
        </h3>
        <p class="mb-6 text-gray-600 dark:text-gray-400">
          æ–‡ç« æ­£åœ¨å‡†å¤‡ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼
        </p>
        <div class="flex justify-center">
          <div class="flex space-x-2">
            <div
              class="h-2 w-2 animate-bounce rounded-full bg-blue-500"
              style="animation-delay: 0ms"
            />
            <div
              class="h-2 w-2 animate-bounce rounded-full bg-blue-500"
              style="animation-delay: 150ms"
            />
            <div
              class="h-2 w-2 animate-bounce rounded-full bg-blue-500"
              style="animation-delay: 300ms"
            />
          </div>
        </div>
      </div>
    </div>
  )
}
